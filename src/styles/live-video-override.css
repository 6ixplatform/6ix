/* -------------------------------------------
Live video wallpaper overrides
Keep legacy theme + auth styles intact.
This only disables CSS-driven backgrounds
and image wallpapers whenever a live video
is active (ThemeProvider sets data-anim).
------------------------------------------- */

/* A) When a live video is active, make the page background transparent
so the video shows through, and stop any fixed attachments. */
:root[data-anim] html,
:root[data-anim] body {
    /* Your ThemeProvider already manages --page-bg â†’ transparent; enforce it */
    background: transparent !important;
    background-image: none !important;
    background-attachment: scroll !important;
}

/* B) Kill ALL CSS pseudo-element backgrounds/animations that sit behind content.
(These were the sources of flicker + double-stacked effects.) */
:root[data-anim] body::before,
:root[data-anim] body::after,
:root[data-anim] .live-card::before,
:root[data-anim] [class^="live-"]::before,
:root[data-anim] [class*=" live-"]::before {
    content: none !important;
    background: none !important;
    animation: none !important;
    filter: none !important;
    opacity: 0 !important;
}

/* C) If an image wallpaper helper is present, disable it while video is on. */
:root[data-anim] html.has-wallpaper body::before {
    content: none !important;
    background: none !important;
    animation: none !important;
    opacity: 0 !important;
}

/* D) Make sure the video layer is always beneath the app and stable. */
#__six_bg_video__,
#\\__six_bg_video__ {
    /* escapes for some bundlers */
    position: fixed !important;
    inset: 0 !important;
    width: 100vw !important;
    height: 100vh !important;
    object-fit: cover !important;
    z-index: -1 !important;
    /* under everything */
    pointer-events: none !important;
    background: #000 !important;
    /* safe base behind the video */
}

/* E) Avoid heavy global effects while video is running (only when data-anim). */
:root[data-anim] .waterfx-mobile,
:root[data-anim] .water-mobile::after,
:root[data-anim] .sheen::after,
:root[data-anim] .sheen-auto::after,
:root[data-anim] .abs-water-lines,
:root[data-anim] .abs-water-gloss {
    display: none !important;
    animation: none !important;
}

/* F) Auth pages stay styled, but never inject animated page backgrounds
when a live video is active. */
:root[data-anim] .legal-scope,
:root[data-anim] .auth-scope,
:root[data-anim] .policy-card,
:root[data-anim] .glass {
    /* keep color tokens; just ensure no animated bg sneaks in */
    background-image: none !important;
}

/* G) Prevent theme flip flicker by forcing text/icon tokens to apply even
when background is transparent under the video. */
:root[data-anim] {
    --page-bg: transparent !important;
}

:root[data-anim] .icon,
:root[data-anim] .msg-actions button,
:root[data-anim] .chat-toolbar button,
:root[data-anim] .btn,
:root[data-anim] .select-trigger {
    color: var(--th-text) !important;
    fill: currentColor !important;
    stroke: currentColor !important;
}